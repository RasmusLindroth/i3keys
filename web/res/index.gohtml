<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>i3keys</title>
	<style>
	{{.CSS}}
	</style>
</head>
<body>
	<div id="sticky-header">
		<ul>
		{{- $kbLayout := .Layouts.ISO -}}
		{{- $kbLayoutMap := .LayoutMaps.ISO -}}
		{{- range $mode_i,$mode := $kbLayout -}}
			<li>
				<a href="#mode_{{$mode_i}}.0">{{if ne .Name ""}}<span>{{.Name}}</span>{{else}}<span class="default">default</span>{{end}}</a>
				<ul>
				{{- range $keyb_i,$keyb := .Keyboards -}}
					<li><a href="#mode_{{$mode_i}}.{{$keyb_i}}">{{if ne .Name ""}}<span>{{.Name}}</span>{{else}}<span class="default">no modifiers</span>{{end}}</a></li>
				{{- end -}}
				</ul>
			</li>
		{{- end -}}
		</ul>
		<div id="options-panel">
			<select id="opt-layout" name="opt-layout">
			{{- range $lmap_i,$lmap := .LayoutMaps -}}
				<option value="{{$lmap_i}}" selected='{{if eq $lmap_i "ISO" }}true{{else}}false{{end}}'>{{$lmap_i}}</option>
			{{- end -}}
			</select>
			<label for="opt-split">Split</label>
			<input type="checkbox" id="opt-split" name="opt-split"></input>
		</div>
	</div>
	<div id="keyboard-holder">
		{{- range $mode_i,$mode := $kbLayout -}}
			{{- range $keyb_i,$keyb := .Keyboards -}}
			<div id="mode_{{$mode_i}}.{{$keyb_i}}">
				<div class="keyboard-heading">
					<h2>{{if ne $mode.Name ""}}<span>{{$mode.Name}}</span>{{else}}<span class="default">default</span>{{end}}</h2>
					<h3>{{if ne $keyb.Name ""}}<span>{{$keyb.Name}}</span>{{else}}<span class="default">no modifiers</span>{{end}}</h3>
				</div>
				<div class="keyboard">
					{{- range $k := keyinfo $keyb -}}
						{{- if $k.Key_empty -}}
						<div 
							class="key {{$k.Key_size}} row-{{$k.I}} {{if eq $k.Key_usage 1}}key-modifier{{else if eq $k.Key_usage 2}}key-used{{end}}"
							>
						</div>
						{{- else -}}
						<div
							class="key {{$k.Key_size}} row-{{$k.I}} {{if eq $k.Key_usage 1}}key-modifier{{else if eq $k.Key_usage 2}}key-used{{end}}"
							data-symbol="{{$k.Key.Symbol}}" 
							data-command="{{$k.Key.Binding.Command}}" 
							>
							<span class="txt">{{$k.Key.Symbol}}</span>
						</div>
						<!-- addEventListener("mouseover",...) -->
						{{- end -}}
					{{- end -}}
				</div>
			</div>
			{{- end -}}
		{{- end -}}
	</div>
	<div class="key-info">
		<p>Hover over a key to see the command bound to the key here:</p>
		<span class="key-desc"></span>
	</div>
	<script>{{.JS}}</script> 
</body>
</html>
